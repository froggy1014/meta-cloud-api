---
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import type { Props } from '@astrojs/starlight/props';

const gaId = import.meta.env.PUBLIC_GA_ID;
---

<StarlightHead {...Astro.props} />

{/* OG Image (og:title, og:description, og:url, og:type, twitter:card are provided by Starlight) */}
<meta property="og:image" content="https://meta-cloud-api.xyz/og-image-1200x630.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="meta-cloud-api - TypeScript SDK for WhatsApp Cloud API" />
<meta property="og:image" content="https://meta-cloud-api.xyz/og-image-square.png" />
<meta property="og:image:width" content="600" />
<meta property="og:image:height" content="600" />
<meta property="og:image:alt" content="meta-cloud-api - TypeScript SDK for WhatsApp Cloud API" />
<meta name="twitter:image" content="https://meta-cloud-api.xyz/og-image-1200x630.png" />

{/* JSON-LD structured data */}
<script is:inline type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "SoftwareSourceCode",
    "name": "meta-cloud-api",
    "description": "TypeScript SDK wrapper for Meta WhatsApp Cloud API",
    "url": "https://meta-cloud-api.xyz",
    "codeRepository": "https://github.com/froggy1014/meta-cloud-api",
    "programmingLanguage": "TypeScript",
    "runtimePlatform": "Node.js",
    "license": "https://opensource.org/licenses/ISC",
    "operatingSystem": "Cross-platform",
})} />

{/* Google Analytics (GA4) */}
{gaId && (
    <>
        <script is:inline async src={`https://www.googletagmanager.com/gtag/js?id=${gaId}`}></script>
        <script is:inline define:vars={{ gaId }}>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', gaId);
        </script>
    </>
)}
